{"ast":null,"code":"const t = true;\nconst richTypes = {\n  Date: t,\n  RegExp: t,\n  String: t,\n  Number: t\n};\nexport default function diff(obj, newObj) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    cyclesFix: true\n  };\n\n  let _stack = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n  let diffs = [];\n  const isObjArray = Array.isArray(obj);\n\n  for (const key in obj) {\n    const objKey = obj[key];\n    const path = isObjArray ? +key : key;\n\n    if (!(key in newObj)) {\n      diffs.push({\n        type: \"REMOVE\",\n        path: [path],\n        oldValue: obj[key]\n      });\n      continue;\n    }\n\n    const newObjKey = newObj[key];\n    const areObjects = typeof objKey === \"object\" && typeof newObjKey === \"object\";\n\n    if (objKey && newObjKey && areObjects && !richTypes[Object.getPrototypeOf(objKey).constructor.name] && (options.cyclesFix ? !_stack.includes(objKey) : true)) {\n      const nestedDiffs = diff(objKey, newObjKey, options, options.cyclesFix ? _stack.concat([objKey]) : []);\n      diffs.push.apply(diffs, nestedDiffs.map(difference => {\n        difference.path.unshift(path);\n        return difference;\n      }));\n    } else if (objKey !== newObjKey && !(areObjects && (isNaN(objKey) ? objKey + \"\" === newObjKey + \"\" : +objKey === +newObjKey))) {\n      diffs.push({\n        path: [path],\n        type: \"CHANGE\",\n        value: newObjKey,\n        oldValue: objKey\n      });\n    }\n  }\n\n  const isNewObjArray = Array.isArray(newObj);\n\n  for (const key in newObj) {\n    if (!(key in obj)) {\n      diffs.push({\n        type: \"CREATE\",\n        path: [isNewObjArray ? +key : key],\n        value: newObj[key]\n      });\n    }\n  }\n\n  return diffs;\n}","map":{"version":3,"names":["t","richTypes","Date","RegExp","String","Number","diff","obj","newObj","options","cyclesFix","_stack","diffs","isObjArray","Array","isArray","key","objKey","path","push","type","oldValue","newObjKey","areObjects","Object","getPrototypeOf","constructor","name","includes","nestedDiffs","concat","apply","map","difference","unshift","isNaN","value","isNewObjArray"],"sources":["C:/Users/ASUS/Desktop/ReactRouter2/ReactRouter/node_modules/microdiff/dist/index.js"],"sourcesContent":["const t = true;\nconst richTypes = { Date: t, RegExp: t, String: t, Number: t };\nexport default function diff(\n\tobj,\n\tnewObj,\n\toptions = { cyclesFix: true },\n\t_stack = []\n) {\n\tlet diffs = [];\n\tconst isObjArray = Array.isArray(obj);\n\tfor (const key in obj) {\n\t\tconst objKey = obj[key];\n\t\tconst path = isObjArray ? +key : key;\n\t\tif (!(key in newObj)) {\n\t\t\tdiffs.push({\n\t\t\t\ttype: \"REMOVE\",\n\t\t\t\tpath: [path],\n\t\t\t\toldValue: obj[key],\n\t\t\t});\n\t\t\tcontinue;\n\t\t}\n\t\tconst newObjKey = newObj[key];\n\t\tconst areObjects =\n\t\t\ttypeof objKey === \"object\" && typeof newObjKey === \"object\";\n\t\tif (\n\t\t\tobjKey &&\n\t\t\tnewObjKey &&\n\t\t\tareObjects &&\n\t\t\t!richTypes[Object.getPrototypeOf(objKey).constructor.name] &&\n\t\t\t(options.cyclesFix ? !_stack.includes(objKey) : true)\n\t\t) {\n\t\t\tconst nestedDiffs = diff(\n\t\t\t\tobjKey,\n\t\t\t\tnewObjKey,\n\t\t\t\toptions,\n\t\t\t\toptions.cyclesFix ? _stack.concat([objKey]) : []\n\t\t\t);\n\t\t\tdiffs.push.apply(\n\t\t\t\tdiffs,\n\t\t\t\tnestedDiffs.map((difference) => {\n\t\t\t\t\tdifference.path.unshift(path);\n\t\t\t\t\treturn difference;\n\t\t\t\t})\n\t\t\t);\n\t\t} else if (\n\t\t\tobjKey !== newObjKey &&\n\t\t\t!(\n\t\t\t\tareObjects &&\n\t\t\t\t(isNaN(objKey)\n\t\t\t\t\t? objKey + \"\" === newObjKey + \"\"\n\t\t\t\t\t: +objKey === +newObjKey)\n\t\t\t)\n\t\t) {\n\t\t\tdiffs.push({\n\t\t\t\tpath: [path],\n\t\t\t\ttype: \"CHANGE\",\n\t\t\t\tvalue: newObjKey,\n\t\t\t\toldValue: objKey,\n\t\t\t});\n\t\t}\n\t}\n\tconst isNewObjArray = Array.isArray(newObj);\n\tfor (const key in newObj) {\n\t\tif (!(key in obj)) {\n\t\t\tdiffs.push({\n\t\t\t\ttype: \"CREATE\",\n\t\t\t\tpath: [isNewObjArray ? +key : key],\n\t\t\t\tvalue: newObj[key],\n\t\t\t});\n\t\t}\n\t}\n\treturn diffs;\n}\n"],"mappings":"AAAA,MAAMA,CAAC,GAAG,IAAV;AACA,MAAMC,SAAS,GAAG;EAAEC,IAAI,EAAEF,CAAR;EAAWG,MAAM,EAAEH,CAAnB;EAAsBI,MAAM,EAAEJ,CAA9B;EAAiCK,MAAM,EAAEL;AAAzC,CAAlB;AACA,eAAe,SAASM,IAAT,CACdC,GADc,EAEdC,MAFc,EAKb;EAAA,IAFDC,OAEC,uEAFS;IAAEC,SAAS,EAAE;EAAb,CAET;;EAAA,IADDC,MACC,uEADQ,EACR;;EACD,IAAIC,KAAK,GAAG,EAAZ;EACA,MAAMC,UAAU,GAAGC,KAAK,CAACC,OAAN,CAAcR,GAAd,CAAnB;;EACA,KAAK,MAAMS,GAAX,IAAkBT,GAAlB,EAAuB;IACtB,MAAMU,MAAM,GAAGV,GAAG,CAACS,GAAD,CAAlB;IACA,MAAME,IAAI,GAAGL,UAAU,GAAG,CAACG,GAAJ,GAAUA,GAAjC;;IACA,IAAI,EAAEA,GAAG,IAAIR,MAAT,CAAJ,EAAsB;MACrBI,KAAK,CAACO,IAAN,CAAW;QACVC,IAAI,EAAE,QADI;QAEVF,IAAI,EAAE,CAACA,IAAD,CAFI;QAGVG,QAAQ,EAAEd,GAAG,CAACS,GAAD;MAHH,CAAX;MAKA;IACA;;IACD,MAAMM,SAAS,GAAGd,MAAM,CAACQ,GAAD,CAAxB;IACA,MAAMO,UAAU,GACf,OAAON,MAAP,KAAkB,QAAlB,IAA8B,OAAOK,SAAP,KAAqB,QADpD;;IAEA,IACCL,MAAM,IACNK,SADA,IAEAC,UAFA,IAGA,CAACtB,SAAS,CAACuB,MAAM,CAACC,cAAP,CAAsBR,MAAtB,EAA8BS,WAA9B,CAA0CC,IAA3C,CAHV,KAIClB,OAAO,CAACC,SAAR,GAAoB,CAACC,MAAM,CAACiB,QAAP,CAAgBX,MAAhB,CAArB,GAA+C,IAJhD,CADD,EAME;MACD,MAAMY,WAAW,GAAGvB,IAAI,CACvBW,MADuB,EAEvBK,SAFuB,EAGvBb,OAHuB,EAIvBA,OAAO,CAACC,SAAR,GAAoBC,MAAM,CAACmB,MAAP,CAAc,CAACb,MAAD,CAAd,CAApB,GAA8C,EAJvB,CAAxB;MAMAL,KAAK,CAACO,IAAN,CAAWY,KAAX,CACCnB,KADD,EAECiB,WAAW,CAACG,GAAZ,CAAiBC,UAAD,IAAgB;QAC/BA,UAAU,CAACf,IAAX,CAAgBgB,OAAhB,CAAwBhB,IAAxB;QACA,OAAOe,UAAP;MACA,CAHD,CAFD;IAOA,CApBD,MAoBO,IACNhB,MAAM,KAAKK,SAAX,IACA,EACCC,UAAU,KACTY,KAAK,CAAClB,MAAD,CAAL,GACEA,MAAM,GAAG,EAAT,KAAgBK,SAAS,GAAG,EAD9B,GAEE,CAACL,MAAD,KAAY,CAACK,SAHN,CADX,CAFM,EAQL;MACDV,KAAK,CAACO,IAAN,CAAW;QACVD,IAAI,EAAE,CAACA,IAAD,CADI;QAEVE,IAAI,EAAE,QAFI;QAGVgB,KAAK,EAAEd,SAHG;QAIVD,QAAQ,EAAEJ;MAJA,CAAX;IAMA;EACD;;EACD,MAAMoB,aAAa,GAAGvB,KAAK,CAACC,OAAN,CAAcP,MAAd,CAAtB;;EACA,KAAK,MAAMQ,GAAX,IAAkBR,MAAlB,EAA0B;IACzB,IAAI,EAAEQ,GAAG,IAAIT,GAAT,CAAJ,EAAmB;MAClBK,KAAK,CAACO,IAAN,CAAW;QACVC,IAAI,EAAE,QADI;QAEVF,IAAI,EAAE,CAACmB,aAAa,GAAG,CAACrB,GAAJ,GAAUA,GAAxB,CAFI;QAGVoB,KAAK,EAAE5B,MAAM,CAACQ,GAAD;MAHH,CAAX;IAKA;EACD;;EACD,OAAOJ,KAAP;AACA"},"metadata":{},"sourceType":"module"}